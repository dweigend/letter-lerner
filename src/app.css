@import 'tailwindcss';

/* ===========================================
   ANIMATION CONFIG
   Adjust these values to tune all animations
   =========================================== */
:root {
	/* Timing */
	--anim-key-feedback: 0.15s;
	--anim-shake: 0.4s;
	--anim-bounce: 1.5s;
	--anim-exit: 0.6s;
	--anim-stagger-delay: 0.1s;

	/* Bounce heights */
	--bounce-height-max: -50px;
	--bounce-height-mid: -15px;
	--bounce-height-small: -6px;
	--exit-height: -120px;

	/* Squash & stretch factors */
	--squash-y: 0.75;
	--stretch-y: 1.15;
	--squash-x: 1.2;
	--stretch-x: 0.9;

	/* Colors */
	--color-success: #22c55e;
	--color-error: #ef4444;
	--color-filled: #f472b6;
	--color-empty: #cbd5e1;
}

/* ===========================================
   BASE STYLES
   =========================================== */
body {
	font-family: 'Nunito', system-ui, sans-serif;
	background: linear-gradient(180deg, #ffffff 0%, #f8fafc 50%, #f1f5f9 100%);
	min-height: 100vh;
	overflow-x: hidden;
}

/* ===========================================
   BITS-UI COMPONENTS
   =========================================== */

/* Button base */
[data-button-root] {
	@apply flex items-center justify-center font-semibold shadow-md transition-all;
	@apply hover:scale-105 active:scale-95;
}

/* Keyboard key */
[data-button-root][data-variant='key'] {
	@apply h-12 w-9 rounded-xl bg-white/80 text-lg text-slate-700;
	@apply hover:bg-white;
	@apply sm:h-14 sm:w-11 sm:text-xl;
	transition:
		background-color var(--anim-key-feedback) ease-out,
		transform var(--anim-key-feedback) ease-out;
}

[data-button-root][data-variant='key'][data-feedback='success'] {
	background-color: var(--color-success);
	@apply text-white;
	transform: scale(1.05);
}

[data-button-root][data-variant='key'][data-feedback='error'] {
	background-color: var(--color-error);
	@apply text-white;
	transform: scale(1.05);
}

/* Primary button */
[data-button-root][data-variant='primary'] {
	@apply w-full gap-2 rounded-xl bg-pink-500 px-6 py-3 text-white;
	@apply shadow-lg shadow-pink-500/25;
	@apply hover:bg-pink-600 hover:shadow-xl;
}

/* Danger button */
[data-button-root][data-variant='danger'] {
	@apply rounded-lg p-2 text-slate-400 shadow-none;
	@apply hover:scale-100 hover:bg-red-50 hover:text-red-500;
}

/* Mini button (admin link) */
[data-button-root][data-variant='mini'] {
	@apply h-8 w-8 rounded-lg bg-white/40 text-slate-400 shadow-none;
	@apply hover:bg-white/60 hover:text-slate-600;
}

/* Progress bar */
[data-progress-root] {
	@apply h-3 w-32 overflow-hidden rounded-full bg-slate-200;
}

.progress-indicator {
	@apply h-full rounded-full bg-gradient-to-r from-pink-400 to-pink-500 transition-all duration-500;
}

/* ===========================================
   GAME COMPONENTS
   =========================================== */

/* Letter slot container */
.letter-slot-container {
	@apply flex flex-col items-center;
	width: 3rem;
}

/* Letter character display */
.letter-char {
	@apply text-4xl font-bold text-slate-700 transition-all duration-200;
	@apply sm:text-5xl;
	min-height: 3.5rem;
	display: flex;
	align-items: flex-end;
	justify-content: center;
}

.letter-char[data-filled='false'] {
	@apply text-transparent;
}

.letter-char[data-shaking='true'] {
	animation: shake var(--anim-shake) ease-in-out;
}

/* Letter underline indicator */
.letter-underline {
	@apply h-1.5 w-full rounded-full transition-all duration-200;
}

.letter-underline[data-state='empty'] {
	background-color: var(--color-empty);
}

.letter-underline[data-state='filled'] {
	background-color: var(--color-filled);
}

.letter-underline[data-state='error'] {
	background-color: var(--color-error);
}

/* Word slots container */
.word-slots-container {
	@apply flex flex-wrap justify-center gap-2 rounded-3xl bg-white/40 p-6 shadow-lg backdrop-blur-sm;
	@apply sm:gap-3;
}

/* Game board layout */
.game-board {
	@apply flex flex-col items-center gap-8;
}

.game-emoji {
	@apply text-8xl sm:text-9xl;
	animation: float-emoji 1.5s ease-in-out infinite;
}

/* Progress header */
.progress-header {
	@apply flex items-center justify-between rounded-2xl bg-white/40 px-6 py-4 shadow-lg backdrop-blur-sm;
}

.progress-title {
	@apply flex items-center gap-3;
}

.progress-title h1 {
	@apply text-2xl font-bold text-slate-700;
}

.progress-info {
	@apply flex items-center gap-4;
}

.progress-text {
	@apply text-lg font-semibold text-slate-600;
}

/* Keyboard layout */
.keyboard-container {
	@apply flex flex-col items-center gap-2;
}

.keyboard-row {
	@apply flex gap-1 sm:gap-2;
}

.keyboard-hint {
	@apply mt-4 text-center text-sm text-slate-500;
}

/* ===========================================
   ADMIN COMPONENTS
   =========================================== */
.admin-card {
	@apply rounded-2xl bg-white/60 p-6 shadow-lg backdrop-blur-sm;
}

.admin-title {
	@apply mb-4 text-xl font-bold text-slate-700;
}

.admin-form {
	@apply space-y-4;
}

.admin-label {
	@apply text-sm font-medium text-slate-600;
}

.admin-input {
	@apply rounded-xl border border-slate-200 bg-white/80 px-4 py-3 text-slate-700;
	@apply placeholder:text-slate-400;
	@apply focus:border-pink-400 focus:outline-none focus:ring-2 focus:ring-pink-200;
}

.admin-message-error {
	@apply rounded-lg bg-red-50 px-4 py-2 text-sm text-red-600;
}

.admin-message-success {
	@apply rounded-lg bg-green-50 px-4 py-2 text-sm text-green-600;
}

.admin-list-item {
	@apply flex items-center justify-between rounded-xl bg-white/80 px-4 py-3 shadow-sm transition-all;
	@apply hover:shadow-md;
}

.admin-list-item-content {
	@apply flex items-center gap-3;
}

.admin-list-emoji {
	@apply text-2xl;
}

.admin-list-word {
	@apply font-semibold text-slate-700;
}

/* ===========================================
   ANIMATIONS
   =========================================== */

/* Floating emoji animation */
@keyframes float-emoji {
	0%,
	100% {
		transform: translateY(0);
	}
	50% {
		transform: translateY(-10px);
	}
}

/* Shake animation for wrong input */
@keyframes shake {
	0%,
	100% {
		transform: translateX(0);
	}
	20% {
		transform: translateX(-8px);
	}
	40% {
		transform: translateX(8px);
	}
	60% {
		transform: translateX(-4px);
	}
	80% {
		transform: translateX(4px);
	}
}

/* Spring bounce with squash & stretch */
@keyframes spring-bounce {
	0% {
		transform: translateY(0) scaleY(1) scaleX(1) rotate(0deg);
	}
	8% {
		transform: translateY(5px) scaleY(var(--squash-y)) scaleX(var(--squash-x)) rotate(0deg);
	}
	20% {
		transform: translateY(-45px) scaleY(var(--stretch-y)) scaleX(var(--stretch-x)) rotate(-8deg);
	}
	32% {
		transform: translateY(var(--bounce-height-max)) scaleY(1.05) scaleX(0.95) rotate(0deg);
	}
	45% {
		transform: translateY(-20px) scaleY(1.1) scaleX(0.92) rotate(6deg);
	}
	55% {
		transform: translateY(0) scaleY(var(--squash-y)) scaleX(var(--squash-x)) rotate(0deg);
	}
	65% {
		transform: translateY(var(--bounce-height-mid)) scaleY(1.08) scaleX(0.94) rotate(-3deg);
	}
	75% {
		transform: translateY(0) scaleY(0.9) scaleX(1.08) rotate(0deg);
	}
	82% {
		transform: translateY(var(--bounce-height-small)) scaleY(1.03) scaleX(0.98) rotate(2deg);
	}
	90% {
		transform: translateY(0) scaleY(0.97) scaleX(1.02) rotate(0deg);
	}
	100% {
		transform: translateY(0) scaleY(1) scaleX(1) rotate(0deg);
	}
}

.letter-celebrating {
	animation: spring-bounce var(--anim-bounce) ease-out infinite;
	color: var(--color-success) !important;
	transform-origin: bottom center;
}

/* Exit animation - final jump into nothing */
@keyframes jump-away {
	0% {
		transform: translateY(0) scaleY(1) scaleX(1);
		opacity: 1;
	}
	15% {
		transform: translateY(8px) scaleY(0.7) scaleX(1.2);
		opacity: 1;
	}
	40% {
		transform: translateY(-60px) scaleY(1.2) scaleX(0.85);
		opacity: 1;
	}
	60% {
		transform: translateY(-80px) scaleY(1.1) scaleX(0.9);
		opacity: 0.7;
	}
	80% {
		transform: translateY(-100px) scaleY(1) scaleX(1);
		opacity: 0.3;
	}
	100% {
		transform: translateY(var(--exit-height)) scaleY(0.8) scaleX(0.8);
		opacity: 0;
	}
}

.letter-exiting {
	animation: jump-away var(--anim-exit) cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
	color: var(--color-success) !important;
	transform-origin: bottom center;
}

/* ===========================================
   MENU COMPONENTS
   =========================================== */

/* Menu container */
[data-menu-container] {
	@apply flex min-h-screen flex-col items-center justify-center gap-8 p-6;
}

/* Menu header */
[data-menu-header] {
	@apply text-center;
}

[data-menu-title] {
	@apply text-4xl font-bold text-slate-700 sm:text-5xl;
}

[data-menu-subtitle] {
	@apply mt-2 text-lg text-slate-500;
}

/* Menu main */
[data-menu-main] {
	@apply w-full max-w-md;
}

/* Level grid */
[data-level-grid] {
	@apply grid gap-4;
}

/* Level card */
[data-level-card] {
	@apply flex flex-col items-center gap-2 rounded-2xl bg-white/60 p-6 shadow-lg backdrop-blur-sm transition-all;
	@apply hover:scale-105 hover:bg-white/80 hover:shadow-xl;
}

[data-level-card][data-disabled] {
	@apply cursor-not-allowed opacity-50;
	@apply hover:scale-100 hover:bg-white/60 hover:shadow-lg;
}

[data-level-emoji] {
	@apply text-4xl;
}

[data-level-name] {
	@apply text-xl font-bold text-slate-700;
}

[data-level-description] {
	@apply text-sm text-slate-500;
}

[data-level-badge] {
	@apply rounded-full bg-slate-200 px-3 py-1 text-xs font-medium text-slate-500;
}

/* ===========================================
   MENU SCENE (Phase 7 - Image-based)
   =========================================== */

/* Full viewport scene container */
[data-menu-scene] {
	position: fixed;
	inset: 0;
	overflow: hidden;
}

/* Prevent body scroll on menu */
body:has([data-menu-scene]) {
	overflow: hidden;
}

/* Background - full cover */
[data-menu-background] {
	position: absolute;
	inset: 0;
	z-index: 0;
	background-image: url('/images/menu/background.png');
	background-size: cover;
	background-position: center bottom;
}

/* Einhorn mascot - behind counter */
[data-menu-mascot] {
	position: absolute;
	z-index: 1;
	bottom: 10%;
	left: 5%;
	width: clamp(150px, 18vw, 320px);
	aspect-ratio: 563 / 1276;
	background-image: url('/images/menu/einhorn.png');
	background-size: contain;
	background-repeat: no-repeat;
}

/* Wooden counter - full width at bottom */
[data-menu-counter] {
	position: absolute;
	z-index: 2;
	bottom: 0;
	left: 0;
	right: 0;
	height: clamp(80px, 12vh, 180px);
	background-image: url('/images/menu/theke.png');
	background-size: 100% 100%;
	background-repeat: no-repeat;
}

/* Items container - centered above counter */
[data-menu-items] {
	position: absolute;
	z-index: 3;
	bottom: clamp(50px, 8vh, 140px);
	left: 50%;
	transform: translateX(-50%);
	display: flex;
	justify-content: center;
	align-items: flex-end;
	gap: clamp(1.5rem, 4vw, 5rem);
}

/* Level item - clickable image */
[data-level-item] {
	display: block;
	cursor: pointer;
	transition:
		transform 0.2s ease-out,
		filter 0.2s ease-out;
	filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
}

[data-level-item]:hover {
	transform: scale(1.08) translateY(-8px);
	filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.4));
}

[data-level-item]:active {
	transform: scale(1.02);
}

[data-level-item][data-disabled] {
	cursor: not-allowed;
	opacity: 0.5;
}

[data-level-item][data-disabled]:hover {
	transform: none;
	filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
}

/* Item images - responsive sizing */
[data-level-image] {
	display: block;
	width: clamp(120px, 18vw, 280px);
	height: auto;
	pointer-events: none;
}

/* Smaller screens */
@media (max-width: 768px) {
	[data-menu-items] {
		gap: 1rem;
	}

	[data-level-image] {
		width: clamp(90px, 25vw, 160px);
	}

	[data-menu-mascot] {
		width: clamp(100px, 22vw, 180px);
	}
}

/* ===========================================
   LEVEL NAVIGATION
   =========================================== */

/* Level nav */
[data-level-nav] {
	@apply absolute left-4 top-4 z-10;
}

/* Back button */
[data-button-root][data-variant='back'] {
	@apply flex items-center gap-2 rounded-xl bg-white/60 px-4 py-2 text-slate-600 shadow-md backdrop-blur-sm;
	@apply hover:bg-white/80 hover:text-slate-800;
}

/* ===========================================
   PUZZLE COMPONENTS
   =========================================== */

/* Puzzle board layout */
[data-puzzle-board] {
	@apply flex flex-col items-center gap-8;
}

/* Drop slots container */
[data-drop-slots] {
	@apply flex flex-wrap justify-center gap-2 rounded-3xl bg-white/40 p-6 shadow-lg backdrop-blur-sm;
	@apply sm:gap-3;
}

/* Individual drop slot */
[data-puzzle-slot] {
	@apply flex flex-col items-center;
	width: 3.5rem;
	min-height: 5rem;
}

[data-puzzle-slot][data-state='empty'] {
	/* Empty slot - no border, placeholder shows the drop zone */
}

[data-puzzle-slot][data-state='filled'] {
	/* Filled slot - letter tile visible */
}

[data-puzzle-slot][data-shaking='true'] {
	animation: shake var(--anim-shake) ease-in-out;
}

/* Slot placeholder (empty drop zone) */
.slot-placeholder {
	@apply h-14 w-12 rounded-xl bg-slate-200/50 transition-colors;
	@apply sm:h-16 sm:w-14;
}

.slot-placeholder[data-error='true'] {
	@apply bg-red-400;
}

/* Letter pool container - transparent, letters stand free */
[data-letter-pool] {
	@apply flex flex-wrap justify-center gap-3 p-4;
	min-height: 5rem;
}

/* Draggable letter tile */
[data-puzzle-letter] {
	@apply flex h-14 w-12 cursor-grab items-center justify-center rounded-xl bg-white text-3xl font-bold text-slate-700 shadow-md transition-all;
	@apply hover:scale-105 hover:shadow-lg;
	@apply active:cursor-grabbing;
	@apply sm:h-16 sm:w-14 sm:text-4xl;
	user-select: none;
	touch-action: none;
}

/* SvelteDnD dragging state */
[data-puzzle-letter]:active {
	@apply scale-110 shadow-xl;
}

/* ===========================================
   READING COMPONENTS
   =========================================== */

/* Reading board layout */
[data-reading-board] {
	@apply flex flex-col items-center gap-12;
}

/* Word display - large and prominent */
.game-word {
	@apply text-5xl font-bold tracking-wide text-slate-700;
	@apply sm:text-6xl md:text-7xl;
}

/* Emoji grid - 3 options in a row */
[data-emoji-grid] {
	@apply flex flex-wrap justify-center gap-4 rounded-3xl bg-white/40 p-6 shadow-lg backdrop-blur-sm;
	@apply sm:gap-6;
}

/* Emoji option button */
[data-reading-option] {
	@apply flex h-24 w-24 cursor-pointer items-center justify-center rounded-2xl bg-white text-6xl shadow-md transition-all;
	@apply hover:scale-110 hover:shadow-lg;
	@apply active:scale-95;
	@apply sm:h-28 sm:w-28 sm:text-7xl;
}

[data-reading-option][data-shaking='true'] {
	animation: shake var(--anim-shake) ease-in-out;
	background-color: var(--color-error);
}

[data-reading-option][data-celebrating='true'] {
	animation: spring-bounce var(--anim-bounce) ease-out;
	background-color: var(--color-success);
	transform-origin: bottom center;
}

[data-reading-option][data-correct='true'] {
	background-color: var(--color-success);
}
